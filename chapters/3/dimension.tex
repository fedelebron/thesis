\section{Dimension}

We begin by analyzing the dimension of the polytope, which we'll call $\dim$. We see that we have six types of variables:
\begin{itemize}
\item $cp_{c, s}$, of which there are $|C| \times |M|$.
\item $csd_{c, w}$, of which there are $|C| \times |W|$.
\item $x_{c, l, p, k}$, of which there are $|C| \times N \times |P| \times |R|$.
\item $class\_date_{c, l, d}$, of which there are $|C| \times N \times |S|$.
\item $busy_{p, c, d}$, of which there are $|P| \times |C| \times |S|$.
\item $busy\_l_{p, c, l}$, of which there are $|P| \times |C| \times N$.
\end{itemize}

This means that the total number of variables is $|C| \times |M| + |C| \times |W| + |C| \times N \times |P| \times |R| + |C| \times N \times |S| + |P| \times |C| \times |S| + |P| \times |C| \times N$. After some simplification, this is $|C| \times |S| \times (|N| + |P|) + |C| \times (|P| \times (N + N \times |R|) +|M| + |W|)$. We will call this number $U$, since it will be an upper bound on the dimension of the polytope.


We find several linearly independent families of equalities which allow us to bound the dimension of the problem more tightly:
\begin{itemize}
\item We have $|C|$ equations from \ref{eq:chosenstart}, each of which refer to different variables, and so are linearly independent and decrease our dimension upper bound by $|C|$.
\item From \ref{eq:chosenpattern} we obtain $|C|$ more linearly independent equations.
\item From \ref{eq:oneclassdate} we get $|C| \times (\sum_{i = 1}^{|C|} n(i))$ equalities, which again are obviously linearly independent since they refer to distinct variables.
\item From \ref{eq:maxclassdates} we find $|C| \times |S| \times (\sum_{i=1}^{|C|} (N - n(i))) = (\sum_{i=1}^{|C|} |C| \times |S| \times N) - (\sum_{i=1}^{|C|} |C| \times |S| \times n(i)) = |C|^2 \times |S| \times N - |C| \times |S| \times (\sum_{i = 1}^{|C|} n(i))$ equalities.
\item We have $|P| \times |C| \times N$ equalities stemming from the totally linear dependence of $busy\_l$ to the other variables. These are used simply for convenience, and so they add no dimensions to the polytope.
\end{itemize}

Considering these families of equalities, which are both linearly independent and linearly independent when combined, we can restrict $\dim$ by $U - 2|C| - |C| \times (\sum_{i = 1}^{|C|} n(i)) - |C|^2 \times |S| \times N + |C| \times |S| \times (\sum_{i = 1}^{|C|} n(i)) - |P| \times |C| \times N$.

By noting $K = \sum_{i=1}^{|C|} n(i)$, we obtain the following result:

\begin{thm}
Let $\dim$ be the dimension of the polytope where there are $|C|$ courses, $|S|$ days in the semester, $|P|$ professors, $|R|$ roles, $|M|$ weekly schedules, $|W|$ starting weeks, $N$ is the maximum number of classes a course has, and $K$ is the sum of the number of classes of each course. Then
\begin{align*}
  \dim \le |C| \times (&N \times |P| \times |R|
                       \\&+ |S| \times (|K| + N - |C| \times N + |P|)
                       \\&- |K|
                       \\&+ |M|
                       \\&+ |W|
                       \\&- 2) 
\end{align*}
\end{thm}

\subsection{Chance hyperplanes}

One might hope that the bound given in the previous section is tight. Indeed, in many cases we have seen it turns out this is actually the dimension of the polytope. However, in general, the bound is unfortunately \emph{not} tight, due to what we will call ``chance hyperplanes'', or ``chance equalities''.

Take, for example, a course $c$ with a class $i$ such that $i$ requires at least 1 instance of a professor with role $j$. Furthermore, assume there is exactly one professor, the $k$th one, who can fulfill that role. Then we will have the following relevant constraints on the polytope:

\begin{align*}
\forall p \in P. x_{c, i, p, j} &\le r_{p, j}\\
1 &\le \sum_{p \in P} x_{c, i, p, j}\\
\forall p \in P. 0 &\le x_{c, i, p, j} \le 1
\end{align*}

Since only professor $k$ can fulfill role $j$, $r_{p, j} = 0 \forall p \ne k$. Thus we have

\begin{align*}
\forall p \in P \setminus \{k\} & x_{c, i, p, j} = 0
\end{align*}

Since these variables vanish, we conclude the following

\begin{align*}
1 &\le \sum_{p \in P \setminus \{k\}} x_{c, i, p, j} + x_{c, i, k, j}\\
  &= 0 + x_{c, i, k, j}\\
  &= x_{c, i, k, j} \le 1
\end{align*}

Thus we have a valid equality $x_{c, i, k, j} = 1$, which is not deduced solely from the problem's ILP, but depends on the actual data that each case has (in this case, on the fact that only professor $k$ can fulfill role $j$).

It is for this reason that the dimension of the polytope will be, in general, lower than the above bound.

